!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports={Router:function({base:e="",routes:t=[]}={}){return{__proto__:new Proxy({},{get:(r,n,o)=>(r,...s)=>t.push([n.toUpperCase(),RegExp(`^${(e+r).replace(/(\/?)\*/g,"($1.*)?").replace(/(\/$)|((?<=\/)\/)/,"").replace(/:(\w+)(\?)?(\.)?/g,"$2(?<$1>[^/]+)$2$3").replace(/\.(?=[\w(])/,"\\.").replace(/\)\.\?\(([^\[]+)\[\^/g,"?)\\.?($1(?<=\\.)[^\\.")}/*$`),s])&&o}),routes:t,async handle(e,...r){let n,o,s=new URL(e.url);for(var[a,u,i]of(e.query=Object.fromEntries(s.searchParams),t))if((a===e.method||"ALL"===a)&&(o=s.pathname.match(u)))for(var c of(e.params=o.groups,i))if(void 0!==(n=await c(e.proxy||e,...r)))return n}}}}},function(e,t,r){"use strict";r.r(t);var n=r(0);var o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s;const a=new Uint8Array(16);function u(){if(!s&&(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(a)}const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function c(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}var l=function(e,t,r){if(o.randomUUID&&!t&&!e)return o.randomUUID();const n=(e=e||{}).random||(e.rng||u)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return c(n)};const p="GET, POST, PATCH, DELETE",d=["http://localhost:3000","https://localhost:3000","https://forum.twdl.us","https://www.forum.twdl.us"],f=e=>e&&(d.includes(e)||-1!==e.indexOf("vercel"))?e:"",g=e=>{let t=e.headers.get("Origin")||e.headers.get("origin");return{"Access-Control-Allow-Origin":f(t),"Access-Control-Allow-Headers":"*","Access-Control-Allow-Methods":p,Allow:p+", HEAD, OPTIONS"}},m=Object(n.Router)();m.get("/",e=>new Response(JSON.stringify({message:"hello, world!"}),{headers:{...g(e),"Content-Type":"application/json"}})),m.get("/messages",async e=>{const t=JSON.parse(await FORUM_DB.get("messages"))||[];return new Response(JSON.stringify({messages:t}),{headers:{...g(e),"Content-Type":"application/json"}})});m.post("/messages",async e=>{const{message:t,timestamp:r}=await e.json();if(t){const e=JSON.parse(await FORUM_DB.get("messages"))||[];await FORUM_DB.put("messages",JSON.stringify([{id:l(),message:t,timestamp:r},...e]))}return new Response(null,{headers:g(e)})}),m.options("*",e=>{const t=g(e);return new Response(null,{headers:t})}),m.all("*",()=>new Response("404, not found!",{status:404})),addEventListener("fetch",e=>{e.respondWith(m.handle(e.request))})}]);